{% extends 'base.html' %}

{% block title %}Menu do Sistema{% endblock %}

{% block content %}
    <!-- Container de Bot천es -->
    <div class="container dashboard-container mt-5">
        <div class="row">
            <!-- Cliente -->
            <div class="col-md-3 mb-3">
                <a class="btn dashboard-btn btn-cliente" data-bs-toggle="modal" data-bs-target="#modalRelatorio">
                    <i class="fas fa-file-invoice"></i> Guias do dia 
                </a>
            </div>

            <!-- Profissional -->
            <div class="col-md-3 mb-3">
                <a class="btn dashboard-btn btn-profissional" data-bs-toggle="modal" data-bs-target="#modalRelatorio2">
                    <i class="fas fa-file-invoice"></i> Fatura detalhada
                </a>
            </div>

            <!-- Gerar Encaminhamento -->
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('encaminhamento_bp.encaminhamento')}}" class="btn dashboard-btn btn-encaminhamento">
                    <i class="fas fa-file-invoice"></i> Resumo faturas
                </a>
            </div>

            <!-- Emitir Guia -->
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('guide_bp.guia')}}" class="btn dashboard-btn btn-guia">
                    <i class="fas fa-file-invoice"></i> Encaminhamentos
                </a>
            </div>
        </div>
    </div>

<!-- Modal Guias do dia  -->
<div class="modal fade" id="modalRelatorio" tabindex="-1" aria-labelledby="modalRelatorioLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalRelatorioLabel">Filtrar Relat처rio de Guias</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <label for="dataFiltro">Selecione a data:</label>
        <input type="date" id="dataFiltro" class="form-control">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="gerarRelatorio()">Gerar Relat처rio</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal fatura detalhada  -->
<div class="modal fade" id="modalRelatorio2" tabindex="-1" aria-labelledby="modalRelatorio2Label" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalRelatorio2Label">Filtrar Fatura Detalhada</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <label for="dataInicial">Selecione a data inicial:</label>
        <input type="date" id="dataInicial" class="form-control">
        <label for="dataFinal">Selecione a data final:</label>
        <input type="date" id="dataFinal" class="form-control">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="gerarRelatorio2()">Gerar Relat처rio</button>
      </div>
    </div>
  </div>
</div>

<script>
function gerarRelatorio() {
    const data = document.getElementById("dataFiltro").value;
    let url = "/relatorios/guias_do_dia";
    if (data) {
        url += "?data=" + data;
    }
    window.open(url, "_blank");
}

function gerarRelatorio2() {
    const dataInicial = document.getElementById("dataInicial").value;
    const dataFinal = document.getElementById("dataFinal").value;
    let url = "/relatorios/guias_por_profissional";

    if (dataInicial && dataFinal) {
        url += "?data_inicio=" + dataInicial + "&data_fim=" + dataFinal;
    }
    window.open(url, "_blank");
}
</script>

{% endblock %}